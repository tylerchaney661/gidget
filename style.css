:root{
  --bg: #0b0d10;
  --card: #12161b;
  --fg: #e7ebf0;
  --muted: #9aa4b2;
  --line: #2a313a;
  --acc: #0EA5E9;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

[data-mode="light"]{
  --bg: #f6f7fb;
  --card: #ffffff;
  --fg: #101418;
  --muted: #6a7685;
  --line: #e3e7ee;
  --shadow: 0 8px 24px rgba(0,0,0,.08);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--fg); font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(10px);
  background:color-mix(in oklab, var(--bg), transparent 40%);
  border-bottom:1px solid var(--line);
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 14px; transition:transform .24s ease, height .24s ease, padding .24s ease;
}
.topbar.shrink{ padding:6px 12px; }
.topbar.hide{ transform:translateY(-100%); }
.topbar .left{ display:flex; align-items:center; gap:10px; }
.brand{ font-weight:700; letter-spacing:.4px; }
.status-dot{ width:10px; height:10px; border-radius:50%; background:#25d366; }
.status-dot.off{ background:#f43f5e; }
.topbar .center{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:center; }
.divider{ width:1px; height:18px; background:var(--line); margin:0 4px; }
.topbar .right{ display:flex; gap:10px; align-items:center; }
.unit-toggle .chip{ min-width:36px; }

#content{ padding:16px; max-width:1100px; margin:0 auto; }
@media (max-width:760px){ #content{ padding:12px; } }

/* Tabs */
.tab{ background:transparent; color:var(--muted); border:1px solid var(--line); padding:6px 10px; border-radius:10px; cursor:pointer; }
.tab.active{ color:var(--fg); border-color:color-mix(in oklab, var(--acc), var(--line) 35%); box-shadow: inset 0 0 0 1px var(--acc); }
.tab:hover{ color:var(--fg); border-color:var(--acc); }
.tabpanel{ margin-top:14px; }

/* Cards & layout */
.card{ background:var(--card); border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:14px; }
.row{ display:flex; gap:12px; }
.wrap{ flex-wrap:wrap; }
.between{ justify-content:space-between; }
.center{ align-items:center; }
.end{ justify-content:flex-end; }
.col{ flex:1; min-width:160px; }
.mt{ margin-top:10px; }
.ml{ margin-left:10px; }
.muted{ color:var(--muted); }
.value{ font-size:20px; font-weight:700; letter-spacing:.3px; }
.dash{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px; }
.dash-item .label{ color:var(--muted); font-size:12px; margin-bottom:6px; }

.input-right{ display:flex; gap:8px; align-items:center; }

label{ color:var(--muted); font-size:12px; display:block; margin-bottom:6px; }
input, select, textarea{
  width:100%; background:#0f1317; color:var(--fg);
  border:1px solid var(--line); outline:none; border-radius:10px; padding:10px 12px;
}
select{ padding:8px 10px; }
textarea{ min-height:76px; resize:vertical; }

/* Buttons */
.btn{ border:1px solid var(--line); border-radius:10px; padding:8px 12px; background:transparent; color:var(--fg); cursor:pointer; }
.btn:hover{ border-color:var(--acc); }
.btn.solid{ background:var(--acc); border-color:var(--acc); color:#0b0d10; font-weight:700; }
.btn.small{ padding:6px 9px; font-size:12px; }
.btnset{ display:flex; gap:8px; flex-wrap:wrap; }
.chip{ border:1px solid var(--line); background:transparent; color:var(--fg); padding:6px 10px; border-radius:999px; cursor:pointer; }
.chip.solid{ background:var(--acc); color:#0b0d10; border-color:var(--acc); }

/* Swatches */
.swatches{ position:fixed; right:12px; bottom:12px; display:flex; gap:8px; z-index:3; }
.swatch{ width:16px; height:16px; border-radius:50%; border:1px solid var(--line); background:var(--acc); cursor:pointer; }
.swatch[data-accent="blue"]{ background:#0EA5E9; }
.swatch[data-accent="mint"]{ background:#6EE7B7; }
.swatch[data-accent="violet"]{ background:#8b5cf6; }
.swatch[data-accent="amber"]{ background:#f59e0b; }
.swatch[data-accent="rose"]{ background:#f43f5e; }

/* Calendar */
.calendar .weekhdr{ display:grid; grid-template-columns:repeat(7,1fr); place-items:center; color:var(--muted); gap:6px; margin:4px 4px 8px; }
.calendar .grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:6px; }
.cell{ border:1px solid var(--line); border-radius:12px; padding:8px; min-height:72px; display:flex; flex-direction:column; }
.cell .d{ font-weight:700; font-size:12px; color:var(--muted); }
.tiny{ font-size:12px; color:var(--fg); opacity:.9; }
.cell-low{ box-shadow: inset 0 0 0 2px #22c55e30; }
.cell-mid{ box-shadow: inset 0 0 0 2px #eab30830; }
.cell-high{ box-shadow: inset 0 0 0 2px #ef444430; }
.clickable{ cursor:pointer; }

/* Tables */
.table-wrap{ overflow:auto; }
table{ width:100%; border-collapse:collapse; }
th, td{ text-align:left; padding:10px; border-bottom:1px solid var(--line); }
.notesCell .noteIcon{ border:1px solid var(--line); background:transparent; color:var(--fg); border-radius:8px; padding:2px 8px; cursor:pointer; }

/* Chart */
.chart canvas{ width:100%; height:320px; display:block; }

/* Toast */
.toast{ position:fixed; left:12px; bottom:12px; background:var(--card); border:1px solid var(--line); padding:10px 12px; border-radius:12px; box-shadow:var(--shadow); opacity:0; transform:translateY(8px); transition:opacity .2s, transform .2s; }
.toast.show{ opacity:1; transform:translateY(0); }

/* Modal */
.modal{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.35); z-index:100; }
.modal[hidden]{ display:none; }
.modal-content{ width:min(720px, 92vw); background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px; box-shadow:var(--shadow); position:relative; }
.modal-close{ position:absolute; right:10px; top:10px; border:1px solid var(--line); background:transparent; color:var(--fg); border-radius:10px; padding:4px 8px; cursor:pointer; }

/* FAB */
.fab{ position:fixed; right:16px; bottom:64px; background:var(--acc); color:#0b0d10; border:none; border-radius:16px; box-shadow:var(--shadow); width:56px; height:56px; font-size:28px; line-height:0; cursor:pointer; }

/* Utilities */
.visually-hidden{ position:absolute !important; width:1px; height:1px; clip:rect(0 0 0 0); margin:-1px; overflow:hidden; padding:0; border:0; }